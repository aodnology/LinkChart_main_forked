<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.fourward.linkchart.persistence.mapper.INoticeMapper">

    <!-- 게시판 리스트 -->
    <select id="getNoticeList" parameterType="NoticeDTO">
        SELECT N.NOTICE_SEQ, N.TITLE, N.NOTICE_YN, N.READ_CNT, U.USER_NAME, N.USER_ID,
               CONTENTS, TO_CHAR(N.REG_DT, "YYYY-MM-DD") AS REG_DT
        FROM NOTICE N, USER_INFO U
        WHERE N.USER_ID = U.USER_ID <!-- NOTICE 유저 아이디에 USER USER_ID 대입-->
        ORDER BY N.NOTICE_YN, N.REG_DT DESC
    </select>

    <!-- 게시판 등록 -->
    <insert id="insertNoticeInfo" parameterType="NoticeDTO">
        INSERT INTO NOTICE(
                           NOTICE_SEQ, TITLE, NOTICE_YN, CONTENTS, USER_ID, READ_CNT,
                           REG_ID, REG_DT, CHG_ID, CHG_DT
        )
        VALUES(
               (SELECT NVL(MAX(A.NOTICE_SEQ),0)+1 FROM NOTICE A),
               #{title}, #{notice_yn}, #{contents}, #{user_id}, 0, #(user_id), SYSDATE, #{user_id}, SYSDATE
              )
    </insert>

    <!-- 게시판 상세보기 -->
    <select id="getNoticeInfo" resultType="NoticeDTO">

    </select>
    <!-- 게시판 수정 -->
    <update id="updateNoticeReadCnt" parameterType="NoticeDTO">
        UPDATE NOTICE SET
    </update>
</mapper>